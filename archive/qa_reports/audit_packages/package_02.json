{
  "package_number": 2,
  "batches": [
    2
  ],
  "total_defects": 32,
  "fixed_count": 28,
  "skipped_count": 4,
  "unique_files": [
    "src/components/accessibility/dashboard/AccessibilityDashboard.jsx",
    "src/components/admin/AuditLogViewer.jsx",
    "src/components/reports/ReportBuilderPage.jsx"
  ],
  "defects": [
    {
      "batch": 2,
      "bug_id": "R01-005",
      "severity": "HIGH",
      "category": "State Bug",
      "file_path": "src/components/admin/AuditLogViewer.jsx",
      "line": "261",
      "description": "Refresh button sets loading to true but never triggers data re-fetch. The useEffect at line 93 depends only on dateRange, but the Refresh button only calls setLoading(true) without changing dateRange.",
      "status": "fixed",
      "skip_reason": "",
      "fix_approach": ""
    },
    {
      "batch": 2,
      "bug_id": "R01-006",
      "severity": "MEDIUM",
      "category": "React Anti-Pattern",
      "file_path": "src/components/admin/AuditLogViewer.jsx",
      "line": "428",
      "description": "Dynamic Tailwind CSS class names constructed via string interpolation (e.g., bg-${color}-100) will not work. Tailwind purges classes at build time and cannot detect dynamically composed class names.",
      "status": "fixed",
      "skip_reason": "",
      "fix_approach": ""
    },
    {
      "batch": 2,
      "bug_id": "R02-013",
      "severity": "MEDIUM",
      "category": "Color Inconsistency",
      "file_path": "src/components/admin/AuditLogViewer.jsx",
      "line": "428",
      "description": "Action type badge uses dynamic Tailwind classes constructed via template literals (bg-${actionConfig.color}-100, text-${actionConfig.color}-700) which will not be compiled by Tailwind's JIT engine and",
      "status": "fixed",
      "skip_reason": "",
      "fix_approach": ""
    },
    {
      "batch": 2,
      "bug_id": "R02-014",
      "severity": "MEDIUM",
      "category": "Responsive Issue",
      "file_path": "src/components/admin/AuditLogViewer.jsx",
      "line": "348",
      "description": "Stats grid uses grid-cols-4 without responsive breakpoints, causing four columns to be compressed on mobile viewports",
      "status": "fixed",
      "skip_reason": "",
      "fix_approach": ""
    },
    {
      "batch": 2,
      "bug_id": "R04-014",
      "severity": "LOW",
      "category": "IA Problem",
      "file_path": "src/components/admin/AuditLogViewer.jsx",
      "line": "36",
      "description": "The AuditLogViewer's RESOURCE_TYPES array (line 36-47) uses inconsistent naming for resources that map to the same tools: 'Accessibility Report' vs 'Accessibility Analyzer', 'Alt Text' vs 'Image Alt G",
      "status": "fixed",
      "skip_reason": "",
      "fix_approach": ""
    },
    {
      "batch": 2,
      "bug_id": "R05-009",
      "severity": "HIGH",
      "category": "Focus Trap",
      "file_path": "src/components/admin/AuditLogViewer.jsx",
      "line": "498",
      "description": "Log Detail modal overlay (rendered when selectedLog is set) does not trap focus, lacks role='dialog' and aria-modal, and has no Escape key handler",
      "status": "fixed",
      "skip_reason": "",
      "fix_approach": ""
    },
    {
      "batch": 2,
      "bug_id": "R05-010",
      "severity": "HIGH",
      "category": "Keyboard Nav Gap",
      "file_path": "src/components/admin/AuditLogViewer.jsx",
      "line": "267",
      "description": "Export dropdown menu is only triggered by CSS :hover (group-hover); it cannot be opened or navigated with keyboard alone",
      "status": "fixed",
      "skip_reason": "",
      "fix_approach": ""
    },
    {
      "batch": 2,
      "bug_id": "R08-A-006",
      "severity": "HIGH",
      "category": "Audit Trail",
      "file_path": "src/components/admin/AuditLogViewer.jsx",
      "line": "94-111",
      "description": "The Audit Log Viewer has a TODO placeholder that returns empty logs. No actual audit logging is implemented, making the entire compliance tracking feature non-functional.",
      "status": "skipped",
      "skip_reason": "Audit Log Viewer has TODO placeholder \u2014 no logging exists",
      "fix_approach": "Create auditLog collection; implement logAuditEvent() utility"
    },
    {
      "batch": 2,
      "bug_id": "R10-A-006",
      "severity": "MEDIUM",
      "category": "Missing Error State",
      "file_path": "src/components/admin/AuditLogViewer.jsx",
      "line": "261",
      "description": "The Refresh button at line 261-265 sets loading to true (setLoading(true)) but never triggers a new data fetch. The useEffect that fetches logs at line 93 only depends on [dateRange]. Clicking Refresh",
      "status": "fixed",
      "skip_reason": "",
      "fix_approach": ""
    },
    {
      "batch": 2,
      "bug_id": "R10-A-007",
      "severity": "MEDIUM",
      "category": "Feedback Gap",
      "file_path": "src/components/admin/AuditLogViewer.jsx",
      "line": "664",
      "description": "The retention policy 'Save Policy' button at line 664 only shows a toast success message but does not actually persist the retention policy change. The onClick handler calls toast.success() and closes",
      "status": "skipped",
      "skip_reason": "Retention Save shows toast but never persists to Firestore",
      "fix_approach": "Persist to Firestore org-settings; load on mount"
    },
    {
      "batch": 2,
      "bug_id": "R10-A-012",
      "severity": "MEDIUM",
      "category": "Edge Case",
      "file_path": "src/components/admin/AuditLogViewer.jsx",
      "line": "382",
      "description": "When the audit log has data but the active filters (search query, action type, resource type, date range) result in zero matching results, the component shows the 'No Audit Logs Yet' empty state (line",
      "status": "fixed",
      "skip_reason": "",
      "fix_approach": ""
    },
    {
      "batch": 2,
      "bug_id": "R01-109",
      "severity": "HIGH",
      "category": "React Anti-Pattern",
      "file_path": "src/components/reports/ReportBuilderPage.jsx",
      "line": "362",
      "description": "The HTML export function embeds reportName directly into an HTML template string without escaping. If the user sets a report name containing HTML tags or script injection payloads, those will be rende",
      "status": "fixed",
      "skip_reason": "",
      "fix_approach": ""
    },
    {
      "batch": 2,
      "bug_id": "R02-105",
      "severity": "MEDIUM",
      "category": "Dark Mode Bug",
      "file_path": "src/components/reports/ReportBuilderPage.jsx",
      "line": "743",
      "description": "Report canvas grid background uses hardcoded rgba(0,0,0,0.03) which becomes invisible against dark backgrounds.",
      "status": "fixed",
      "skip_reason": "",
      "fix_approach": ""
    },
    {
      "batch": 2,
      "bug_id": "R02-106",
      "severity": "LOW",
      "category": "Z-Index Conflict",
      "file_path": "src/components/reports/ReportBuilderPage.jsx",
      "line": "677",
      "description": "Export format dropdown uses z-10 which is lower than many other positioned elements in the application (Navigation z-40, modals z-50, BulkActionsBar z-50).",
      "status": "fixed",
      "skip_reason": "",
      "fix_approach": ""
    },
    {
      "batch": 2,
      "bug_id": "R06-106",
      "severity": "MEDIUM",
      "category": "Heading Hierarchy",
      "file_path": "src/components/reports/ReportBuilderPage.jsx",
      "line": "412",
      "description": "ReportBuilderPage uses h2 for 'Report Builder' (line 412) and h3 elements for sidebar sections (lines 455, 489, 543, 568, 714, 837) but has no h1 element on the page at all. The page title is an <inpu",
      "status": "fixed",
      "skip_reason": "",
      "fix_approach": ""
    },
    {
      "batch": 2,
      "bug_id": "R06-108",
      "severity": "HIGH",
      "category": "Meta Tag Issue",
      "file_path": "src/components/reports/ReportBuilderPage.jsx",
      "line": "362",
      "description": "The HTML export feature in ReportBuilderPage (lines 362-382) generates a standalone HTML document with minimal SEO tags. The exported HTML has <meta charset> and <title> but is missing: meta viewport ",
      "status": "skipped",
      "skip_reason": "HTML export missing viewport, lang, OG tags",
      "fix_approach": "Add complete HTML5 boilerplate to export template"
    },
    {
      "batch": 2,
      "bug_id": "R08-B-007",
      "severity": "MEDIUM",
      "category": "Missing Feature",
      "file_path": "src/components/reports/ReportBuilderPage.jsx",
      "line": "522",
      "description": "The delete button for saved reports in the Report Builder sidebar has no confirmation dialog. Clicking the Trash2 icon button immediately calls deleteReport(report.id) without any confirmation prompt.",
      "status": "fixed",
      "skip_reason": "",
      "fix_approach": ""
    },
    {
      "batch": 2,
      "bug_id": "R09-B-002",
      "severity": "HIGH",
      "category": "Bundle Size",
      "file_path": "src/components/reports/ReportBuilderPage.jsx",
      "line": "33",
      "description": "ReportBuilderPage statically imports both jsPDF and html2canvas at the top level. These are heavyweight libraries (jsPDF ~300KB, html2canvas ~200KB minified) that are only needed when the user clicks ",
      "status": "fixed",
      "skip_reason": "",
      "fix_approach": ""
    },
    {
      "batch": 2,
      "bug_id": "R09-B-015",
      "severity": "LOW",
      "category": "Build Issue",
      "file_path": "src/components/reports/ReportBuilderPage.jsx",
      "line": "362",
      "description": "The HTML export function in ReportBuilderPage constructs an HTML string using template literals with unsanitized user input (reportName). The report name is interpolated directly into the HTML title t",
      "status": "fixed",
      "skip_reason": "",
      "fix_approach": ""
    },
    {
      "batch": 2,
      "bug_id": "R10-B-001",
      "severity": "HIGH",
      "category": "Flow Break",
      "file_path": "src/components/reports/ReportBuilderPage.jsx",
      "line": "80",
      "description": "The ReportBuilderPage tracks unsaved changes via hasUnsavedChanges state but never registers a beforeunload listener to warn users when navigating away from the page with unsaved report layouts. The h",
      "status": "fixed",
      "skip_reason": "",
      "fix_approach": ""
    },
    {
      "batch": 2,
      "bug_id": "R10-B-003",
      "severity": "HIGH",
      "category": "Undo Missing",
      "file_path": "src/components/reports/ReportBuilderPage.jsx",
      "line": "174",
      "description": "The Report Builder allows users to delete widgets (removeWidget function at line 174) with a single click and no confirmation dialog or undo capability. Unlike the ScheduledReportsPanel which implemen",
      "status": "fixed",
      "skip_reason": "",
      "fix_approach": ""
    },
    {
      "batch": 2,
      "bug_id": "R10-B-008",
      "severity": "MEDIUM",
      "category": "Missing Loading State",
      "file_path": "src/components/reports/ReportBuilderPage.jsx",
      "line": "255",
      "description": "The saveReport function (line 255-280) performs async operations (createReport/updateReport) but the save button (line 662-670) has no loading state indicator. While the button is disabled when there ",
      "status": "fixed",
      "skip_reason": "",
      "fix_approach": ""
    },
    {
      "batch": 2,
      "bug_id": "R01-003",
      "severity": "HIGH",
      "category": "Missing Error Handling",
      "file_path": "src/components/accessibility/dashboard/AccessibilityDashboard.jsx",
      "line": "536",
      "description": "new URL(page.address) at line 536 will throw if page.address is not a valid URL, crashing the component inside a render path without try-catch.",
      "status": "fixed",
      "skip_reason": "",
      "fix_approach": ""
    },
    {
      "batch": 2,
      "bug_id": "R01-004",
      "severity": "LOW",
      "category": "Performance Bug",
      "file_path": "src/components/accessibility/dashboard/AccessibilityDashboard.jsx",
      "line": "146",
      "description": "handleExportPDF, handleExportExcel, and handleExportVPAT functions are not wrapped in useCallback despite referencing stable dependencies. These get recreated on every render.",
      "status": "skipped",
      "skip_reason": "Export handlers not wrapped in useCallback",
      "fix_approach": "Wrap in useCallback; minimal real-world impact"
    },
    {
      "batch": 2,
      "bug_id": "R02-006",
      "severity": "HIGH",
      "category": "Dark Mode Bug",
      "file_path": "src/components/accessibility/dashboard/AccessibilityDashboard.jsx",
      "line": "199",
      "description": "AccessibilityDashboard top-level container uses light-only gradient (from-charcoal-50 to-white) with no dark: variant, making the entire dashboard render with a bright background in dark mode",
      "status": "fixed",
      "skip_reason": "",
      "fix_approach": ""
    },
    {
      "batch": 2,
      "bug_id": "R02-007",
      "severity": "MEDIUM",
      "category": "Dark Mode Bug",
      "file_path": "src/components/accessibility/dashboard/AccessibilityDashboard.jsx",
      "line": "201",
      "description": "Sticky header uses bg-white/80 and border-charcoal-100/50 without dark mode variants, creating a translucent white bar over content when scrolling in dark mode",
      "status": "fixed",
      "skip_reason": "",
      "fix_approach": ""
    },
    {
      "batch": 2,
      "bug_id": "R03-004",
      "severity": "MEDIUM",
      "category": "Terminology Inconsistency",
      "file_path": "src/components/accessibility/dashboard/AccessibilityDashboard.jsx",
      "line": "128",
      "description": "The score label uses 'Needs Work' while AccessibilityAuditPage.jsx line 190 uses 'needs improvement' for the same score range (50-69). Both describe a compliance score between 50 and 70 but use differ",
      "status": "fixed",
      "skip_reason": "",
      "fix_approach": ""
    },
    {
      "batch": 2,
      "bug_id": "R04-006",
      "severity": "MEDIUM",
      "category": "Content Grouping",
      "file_path": "src/components/accessibility/dashboard/AccessibilityDashboard.jsx",
      "line": "262",
      "description": "Dashboard tab labels use inconsistent content-type terminology. The tabs are: 'Overview', 'Violations', 'Pages', and 'WCAG Reference'. 'WCAG Reference' is an informational/educational resource mixed i",
      "status": "fixed",
      "skip_reason": "",
      "fix_approach": ""
    },
    {
      "batch": 2,
      "bug_id": "R05-006",
      "severity": "MEDIUM",
      "category": "Keyboard Nav Gap",
      "file_path": "src/components/accessibility/dashboard/AccessibilityDashboard.jsx",
      "line": "262",
      "description": "Tab navigation buttons (Overview/Violations/Pages/WCAG Reference) do not use ARIA tablist/tab pattern and lack aria-selected state",
      "status": "fixed",
      "skip_reason": "",
      "fix_approach": ""
    },
    {
      "batch": 2,
      "bug_id": "R05-007",
      "severity": "MEDIUM",
      "category": "Form A11y",
      "file_path": "src/components/accessibility/dashboard/AccessibilityDashboard.jsx",
      "line": "575",
      "description": "Search input for violations has no visible <label> or aria-label; only placeholder text 'Search violations...' provides context",
      "status": "fixed",
      "skip_reason": "",
      "fix_approach": ""
    },
    {
      "batch": 2,
      "bug_id": "R06-016",
      "severity": "MEDIUM",
      "category": "Heading Hierarchy",
      "file_path": "src/components/accessibility/dashboard/AccessibilityDashboard.jsx",
      "line": "218",
      "description": "AccessibilityDashboard uses h1 for the domain name at line 218, then skips to h3 for section headings like 'POUR Principles' (line 391), 'Violations by Impact' (line 433), 'Top Issues to Fix' (line 47",
      "status": "fixed",
      "skip_reason": "",
      "fix_approach": ""
    },
    {
      "batch": 2,
      "bug_id": "R07-A-013",
      "severity": "MEDIUM",
      "category": "Missing Disclaimer",
      "file_path": "src/components/accessibility/dashboard/AccessibilityDashboard.jsx",
      "line": "505",
      "description": "The AccessibilityDashboard displays 'AI Fix' badges and Sparkles icons for issues marked as 'aiFixable' (lines 505-506, 647-650), indicating AI-generated remediation is available. However, the dashboa",
      "status": "fixed",
      "skip_reason": "",
      "fix_approach": ""
    }
  ]
}