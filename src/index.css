@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

/* ===============================================
   MODERN DESIGN SYSTEM - Content Strategy Portal
   =============================================== */

:root {
  /* Core design tokens */
  --color-primary: #0066FF;
  --color-primary-light: #EFF6FF;
  --color-accent-cyan: #00D4FF;
  --color-accent-purple: #8B5CF6;

  /* Surface & glass effects */
  --glass-bg: rgba(255, 255, 255, 0.7);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-shadow: 0 8px 32px rgba(31, 38, 135, 0.08);

  /* Typography */
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  line-height: 1.6;
  font-weight: 400;

  /* Rendering optimizations */
  color-scheme: light;
  color: #1a1f2e;
  background-color: #f8fafc;

  font-synthesis: none;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Dark mode root */
.dark {
  color-scheme: dark;
  color: #f1f5f9;
  background-color: #0f172a;
}

/* Base styles */
body {
  margin: 0;
  min-height: 100vh;
  background: linear-gradient(180deg, #f8fafc 0%, #f1f5f9 100%);
}

.dark body,
body.dark {
  background: linear-gradient(180deg, #0f172a 0%, #020617 100%);
}

* {
  box-sizing: border-box;
}

/* Selection styling */
::selection {
  background: rgba(0, 102, 255, 0.15);
  color: inherit;
}

/* Focus visible for accessibility */
:focus-visible {
  outline: 2px solid var(--color-primary);
  outline-offset: 2px;
}

/* Smooth scrolling */
html {
  scroll-behavior: smooth;
}

/* Scrollbar styling */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: #f1f5f9;
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: #cbd5e1;
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: #94a3b8;
}

/* Dark mode scrollbar */
html.dark::-webkit-scrollbar-track {
  background: #1e293b;
}

html.dark::-webkit-scrollbar-thumb {
  background: #475569;
}

html.dark::-webkit-scrollbar-thumb:hover {
  background: #64748b;
}

.dark ::-webkit-scrollbar-track {
  background: #1e293b;
}

.dark ::-webkit-scrollbar-thumb {
  background: #475569;
}

.dark ::-webkit-scrollbar-thumb:hover {
  background: #64748b;
}

/* ===============================================
   COMPONENT LAYER
   =============================================== */

@layer components {
  /* ----- BUTTONS ----- */
  .btn {
    @apply px-5 py-2.5 rounded-xl font-medium text-sm
           transition-all duration-200 ease-out
           focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2
           active:scale-[0.98]
           disabled:opacity-50 disabled:cursor-not-allowed disabled:active:scale-100;
  }

  .btn-primary {
    @apply bg-gradient-to-r from-primary-500 to-primary-600
           text-white
           hover:from-primary-600 hover:to-primary-700
           shadow-sm hover:shadow-md hover:shadow-primary-500/20
           focus-visible:ring-primary-500;
  }

  .btn-secondary {
    @apply bg-white text-charcoal-700
           border border-charcoal-200
           hover:bg-charcoal-50 hover:border-charcoal-300
           shadow-sm
           focus-visible:ring-charcoal-400;
  }

  .btn-ghost {
    @apply bg-transparent text-charcoal-600
           hover:bg-charcoal-100 hover:text-charcoal-900
           focus-visible:ring-charcoal-400;
  }

  .btn-danger {
    @apply bg-gradient-to-r from-red-500 to-red-600
           text-white
           hover:from-red-600 hover:to-red-700
           shadow-sm hover:shadow-md hover:shadow-red-500/20
           focus-visible:ring-red-500;
  }

  .btn-success {
    @apply bg-gradient-to-r from-emerald-500 to-emerald-600
           text-white
           hover:from-emerald-600 hover:to-emerald-700
           shadow-sm hover:shadow-md hover:shadow-emerald-500/20
           focus-visible:ring-emerald-500;
  }

  /* Size variants */
  .btn-sm {
    @apply px-3 py-1.5 text-xs rounded-lg;
  }

  .btn-lg {
    @apply px-7 py-3.5 text-base rounded-2xl;
  }

  /* Icon button */
  .btn-icon {
    @apply p-2.5 rounded-xl
           hover:bg-charcoal-100
           transition-colors duration-200
           focus:outline-none focus-visible:ring-2 focus-visible:ring-primary-500 focus-visible:ring-offset-2;
  }

  /* ----- CARDS ----- */
  .card {
    @apply bg-white rounded-2xl
           shadow-card
           border border-charcoal-100/50
           transition-all duration-300 ease-out;
  }

  .card-hover {
    @apply hover:shadow-card-hover hover:border-charcoal-200/70
           hover:-translate-y-0.5;
  }

  .card-interactive {
    @apply card card-hover cursor-pointer;
  }

  .card-glass {
    @apply rounded-2xl
           bg-white/70 backdrop-blur-xl
           border border-white/20
           shadow-glass;
  }

  .card-gradient {
    @apply card
           bg-gradient-to-br from-white to-charcoal-50/50;
  }

  /* ----- INPUTS ----- */
  .input {
    @apply w-full px-4 py-2.5
           bg-white
           border border-charcoal-200
           rounded-xl
           text-charcoal-900 placeholder:text-charcoal-500
           transition-all duration-200
           focus:outline-none focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500
           hover:border-charcoal-300;
  }

  .input-lg {
    @apply px-5 py-3.5 text-base rounded-2xl;
  }

  .input-error {
    @apply border-red-300 focus:ring-red-500/20 focus:border-red-500;
  }

  /* Search input */
  .input-search {
    @apply input pl-11;
  }

  /* Select */
  .select {
    @apply input appearance-none cursor-pointer
           bg-no-repeat bg-right
           pr-10;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='%2394a3b8' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='m6 9 6 6 6-6'/%3E%3C/svg%3E");
    background-position: right 12px center;
    background-size: 18px;
  }

  /* ----- BADGES ----- */
  .badge {
    @apply inline-flex items-center
           px-2.5 py-0.5
           text-xs font-medium
           rounded-full
           transition-colors duration-200;
  }

  .badge-primary {
    @apply bg-primary-100 text-primary-700;
  }

  .badge-success {
    @apply bg-emerald-100 text-emerald-700;
  }

  .badge-warning {
    @apply bg-amber-100 text-amber-700;
  }

  .badge-danger {
    @apply bg-red-100 text-red-700;
  }

  .badge-info {
    @apply bg-cyan-100 text-cyan-700;
  }

  .badge-purple {
    @apply bg-purple-100 text-purple-700;
  }

  .badge-neutral {
    @apply bg-charcoal-100 text-charcoal-600;
  }

  /* Pill badges with border */
  .badge-outline {
    @apply bg-transparent border;
  }

  .badge-outline-primary {
    @apply badge-outline border-primary-300 text-primary-600;
  }

  /* ----- NAVIGATION ----- */
  .nav-link {
    @apply flex items-center gap-2
           px-3 py-2 rounded-xl
           text-charcoal-600 font-medium
           transition-all duration-200
           hover:bg-charcoal-100 hover:text-charcoal-900;
  }

  .nav-link-active {
    @apply bg-primary-50 text-primary-600
           hover:bg-primary-100 hover:text-primary-700;
  }

  /* ----- DROPDOWN ----- */
  .dropdown-menu {
    @apply absolute z-[60]
           min-w-[12rem] p-1.5
           bg-white rounded-xl
           border border-charcoal-100
           shadow-elevated
           animate-fade-in-down;
  }

  .dropdown-item {
    @apply flex items-center gap-3
           px-3 py-2.5 rounded-lg
           text-sm text-charcoal-700
           transition-colors duration-150
           hover:bg-charcoal-50;
  }

  .dropdown-item-active {
    @apply bg-primary-50 text-primary-700;
  }

  /* ----- MODALS ----- */
  .modal-backdrop {
    @apply fixed inset-0 z-50
           bg-charcoal-900/60 backdrop-blur-sm
           flex items-center justify-center p-4;
  }

  .modal {
    @apply bg-white rounded-2xl
           shadow-elevated
           w-full max-w-lg
           animate-scale-in;
  }

  .modal-header {
    @apply px-6 py-4
           border-b border-charcoal-100
           flex items-center justify-between;
  }

  .modal-body {
    @apply px-6 py-4;
  }

  .modal-footer {
    @apply px-6 py-4
           border-t border-charcoal-100
           flex items-center justify-end gap-3;
  }

  /* ----- TABLES ----- */
  .table-modern {
    @apply w-full text-sm;
  }

  .table-modern thead {
    @apply bg-charcoal-50/70 sticky top-0;
  }

  .table-modern th {
    @apply px-4 py-3.5
           text-left text-xs font-semibold text-charcoal-500 uppercase tracking-wider
           border-b border-charcoal-200;
  }

  .table-modern td {
    @apply px-4 py-3.5
           text-charcoal-700
           border-b border-charcoal-100;
  }

  .table-modern tbody tr {
    @apply transition-colors duration-150
           hover:bg-charcoal-50/50;
  }

  /* ----- STAT CARD ----- */
  .stat-card {
    @apply card p-5 flex items-center gap-4;
  }

  .stat-icon {
    @apply w-12 h-12 rounded-xl
           flex items-center justify-center
           transition-transform duration-300
           group-hover:scale-110;
  }

  /* ----- AVATAR ----- */
  .avatar {
    @apply w-10 h-10 rounded-full
           bg-gradient-to-br from-primary-400 to-primary-600
           flex items-center justify-center
           text-white font-semibold text-sm;
  }

  .avatar-ring {
    @apply ring-2 ring-white ring-offset-2 ring-offset-charcoal-50 dark:ring-charcoal-800 dark:ring-offset-charcoal-900;
  }

  /* ----- TABS ----- */
  .tabs {
    @apply flex gap-1 p-1
           bg-charcoal-100/70 rounded-xl;
  }

  .tab {
    @apply flex items-center gap-2
           px-4 py-2 rounded-lg
           text-sm font-medium text-charcoal-600
           transition-all duration-200
           hover:text-charcoal-900;
  }

  .tab-active {
    @apply bg-white text-primary-600
           shadow-sm;
  }

  /* ----- SKIP LINK (A11Y) ----- */
  .skip-link {
    @apply absolute z-[100]
           left-4 px-4 py-2
           bg-primary-600 text-white
           font-medium rounded-lg
           shadow-lg
           transition-all duration-200
           transform -translate-y-full
           focus:translate-y-4;
  }
}

/* ===============================================
   UTILITY CLASSES
   =============================================== */

@layer utilities {
  /* Glass effect */
  .glass {
    @apply bg-white/70 backdrop-blur-xl border border-white/20;
  }

  .glass-dark {
    @apply bg-charcoal-900/70 backdrop-blur-xl border border-white/10;
  }

  /* Gradient text */
  .text-gradient {
    @apply bg-clip-text text-transparent
           bg-gradient-to-r from-primary-500 via-cyan-500 to-purple-500;
  }

  .text-gradient-primary {
    @apply bg-clip-text text-transparent
           bg-gradient-to-r from-primary-500 to-primary-700;
  }

  .text-gradient-purple {
    @apply bg-clip-text text-transparent
           bg-gradient-to-r from-purple-500 to-indigo-600;
  }

  /* Glow effects */
  .glow-primary {
    box-shadow: 0 0 20px rgba(0, 102, 255, 0.25);
  }

  .glow-cyan {
    box-shadow: 0 0 20px rgba(0, 212, 255, 0.25);
  }

  .glow-purple {
    box-shadow: 0 0 20px rgba(139, 92, 246, 0.25);
  }

  /* Hide scrollbar but keep functionality */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }
}

/* ===============================================
   ANIMATIONS
   =============================================== */

/* Staggered children animation */
.stagger-children > * {
  animation: fadeInUp 0.4s ease-out forwards;
  opacity: 0;
}

.stagger-children > *:nth-child(1) { animation-delay: 0ms; }
.stagger-children > *:nth-child(2) { animation-delay: 50ms; }
.stagger-children > *:nth-child(3) { animation-delay: 100ms; }
.stagger-children > *:nth-child(4) { animation-delay: 150ms; }
.stagger-children > *:nth-child(5) { animation-delay: 200ms; }
.stagger-children > *:nth-child(6) { animation-delay: 250ms; }
.stagger-children > *:nth-child(7) { animation-delay: 300ms; }
.stagger-children > *:nth-child(8) { animation-delay: 350ms; }
.stagger-children > *:nth-child(9) { animation-delay: 400ms; }
.stagger-children > *:nth-child(10) { animation-delay: 450ms; }
.stagger-children > *:nth-child(11) { animation-delay: 500ms; }
.stagger-children > *:nth-child(12) { animation-delay: 550ms; }
.stagger-children > *:nth-child(n+13) { animation-delay: 600ms; }

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(12px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Number counter animation */
@keyframes countUp {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.count-up {
  animation: countUp 0.5s ease-out forwards;
}

/* ===============================================
   DARK MODE COMPONENT OVERRIDES
   =============================================== */

/* Dark mode cards */
.dark .card {
  @apply bg-charcoal-800 border-charcoal-700/50;
}

.dark .card-hover:hover {
  @apply border-charcoal-600/70;
}

.dark .card-glass {
  @apply bg-charcoal-800/70 border-charcoal-700/20;
  --glass-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
  box-shadow: var(--glass-shadow);
}

.dark .card-gradient {
  @apply bg-gradient-to-br from-charcoal-800 to-charcoal-900/50;
}

/* Dark mode buttons */
.dark .btn-secondary {
  @apply bg-charcoal-800 text-charcoal-200 border-charcoal-700 hover:bg-charcoal-700 hover:border-charcoal-600;
}

.dark .btn-ghost {
  @apply text-charcoal-300 hover:bg-charcoal-800 hover:text-charcoal-100;
}

/* Dark mode inputs */
.dark .input {
  @apply bg-charcoal-800 border-charcoal-700 text-charcoal-100 placeholder:text-charcoal-500
         focus:ring-primary-500/30 focus:border-primary-500 hover:border-charcoal-600;
}

.dark .select {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='%2364748b' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='m6 9 6 6 6-6'/%3E%3C/svg%3E");
}

/* Dark mode badges */
.dark .badge-primary {
  @apply bg-primary-900/50 text-primary-300;
}

.dark .badge-success {
  @apply bg-emerald-900/50 text-emerald-300;
}

.dark .badge-warning {
  @apply bg-amber-900/50 text-amber-300;
}

.dark .badge-danger {
  @apply bg-red-900/50 text-red-300;
}

.dark .badge-info {
  @apply bg-cyan-900/50 text-cyan-300;
}

.dark .badge-purple {
  @apply bg-purple-900/50 text-purple-300;
}

.dark .badge-neutral {
  @apply bg-charcoal-700 text-charcoal-300;
}

/* Dark mode navigation */
.dark .nav-link {
  @apply text-charcoal-300 hover:bg-charcoal-800 hover:text-charcoal-100;
}

.dark .nav-link-active {
  @apply bg-primary-900/30 text-primary-400 hover:bg-primary-900/40 hover:text-primary-300;
}

/* Dark mode dropdowns */
.dark .dropdown-menu {
  @apply bg-charcoal-800 border-charcoal-700;
}

.dark .dropdown-item {
  @apply text-charcoal-300 hover:bg-charcoal-700;
}

.dark .dropdown-item-active {
  @apply bg-primary-900/30 text-primary-400;
}

/* Dark mode modals */
.dark .modal-backdrop {
  @apply bg-charcoal-950/80;
}

.dark .modal {
  @apply bg-charcoal-800;
}

.dark .modal-header {
  @apply border-charcoal-700;
}

.dark .modal-footer {
  @apply border-charcoal-700;
}

/* Dark mode tables */
.dark .table-modern thead {
  @apply bg-charcoal-800/70;
}

.dark .table-modern th {
  @apply text-charcoal-400 border-charcoal-700;
}

.dark .table-modern td {
  @apply text-charcoal-300 border-charcoal-700/50;
}

.dark .table-modern tbody tr:hover {
  @apply bg-charcoal-700/50;
}

/* Dark mode tabs */
.dark .tabs {
  @apply bg-charcoal-800/70;
}

.dark .tab {
  @apply text-charcoal-400 hover:text-charcoal-200;
}

.dark .tab-active {
  @apply bg-charcoal-700 text-primary-400;
}

/* Dark mode selection */
.dark ::selection {
  background: rgba(0, 102, 255, 0.3);
}

/* ===============================================
   SECTION 508 ACCESSIBILITY ENHANCEMENTS
   =============================================== */

/* Reduced Motion - respects user preferences */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* Toggle Switch - Accessible Component */
@layer components {
  .toggle-switch {
    @apply relative inline-flex h-6 w-11 items-center rounded-full
           transition-colors duration-200 ease-in-out
           focus:outline-none focus-visible:ring-2 focus-visible:ring-primary-500 focus-visible:ring-offset-2;
  }

  .toggle-switch[aria-checked="true"] {
    @apply bg-primary-500;
  }

  .toggle-switch[aria-checked="false"] {
    @apply bg-charcoal-300;
  }

  .toggle-switch-thumb {
    @apply inline-block h-5 w-5 transform rounded-full bg-white shadow-md
           transition-transform duration-200 ease-in-out;
  }

  .toggle-switch[aria-checked="true"] .toggle-switch-thumb {
    @apply translate-x-5;
  }

  .toggle-switch[aria-checked="false"] .toggle-switch-thumb {
    @apply translate-x-0.5;
  }

  /* Dark mode toggle */
  .dark .toggle-switch[aria-checked="false"] {
    @apply bg-charcoal-600;
  }
}

/* High Contrast Mode Support */
@media (forced-colors: active) {
  .btn-primary,
  .btn-danger,
  .btn-success {
    forced-color-adjust: none;
    border: 2px solid currentColor;
  }

  .input,
  .select {
    border: 2px solid currentColor;
  }

  .badge {
    border: 1px solid currentColor;
  }
}

/* Focus Within for Form Groups */
.form-group:focus-within label {
  @apply text-primary-600;
}

.dark .form-group:focus-within label {
  @apply text-primary-400;
}

/* Screen Reader Only - Enhanced */
.sr-only-focusable:focus,
.sr-only-focusable:active {
  position: static;
  width: auto;
  height: auto;
  padding: inherit;
  margin: inherit;
  overflow: visible;
  clip: auto;
  white-space: normal;
}
